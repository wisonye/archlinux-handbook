* Package management

** Enable =Color= settings

Open =/etc/pacman.conf= and enable =Color= and save.


** Setup mirrorlist

=/etc/pacman.d/mirrorlist= should be set during the =archinstall= process, just in case, here is New Zealand mirrors: 

#+BEGIN_SRC conf
  ################################################################################
  ################# Arch Linux mirrorlist generated by Reflector #################
  ################################################################################

  # With:       reflector @/etc/xdg/reflector/reflector.conf
  # When:       2024-05-17 03:15:28 UTC
  # From:       https://archlinux.org/mirrors/status/json/
  # Retrieved:  2024-05-17 03:14:04 UTC
  # Last Check: 2024-05-17 03:08:34 UTC

  Server = https://mirror.2degrees.nz/archlinux/$repo/os/$arch
  Server = https://archlinux.ourhome.kiwi/$repo/os/$arch
#+END_SRC


** Update meta data and upgrade all installed packages

#+BEGIN_SRC bash
  doas pacman --sync --refresh  
  doas pacman -Syu
#+END_SRC


** Search packages to install

#+BEGIN_SRC bash
  doas pacman --sync --search  
#+END_SRC


** Install and remove

#+BEGIN_SRC bash
  # Install package by name
  doas pacman --sync --refresh   PACKAGE_NAME

  # Remove package by name
  doas pacman -Rsun PACKAGE_NAME
#+END_SRC


** Query already installed packages

#+BEGIN_SRC bash
  pacman --query | sort | bat
#+END_SRC


** Package detail info for the given installed package

#+BEGIN_SRC bash
  pacman --sync --info PACKAGE_NAME
#+END_SRC


** List install files for the given package

#+BEGIN_SRC bash
  pacman --query --list PACKAGE_NAME
#+END_SRC


** How to remove unused (dependencies) packages

List only before removing:

#+BEGIN_SRC bash
  # -Q: Query packages.
  # -d: List packages installed as dependencies [filter].
  # -q: Show less information for query and search.
  # -t: List packages not (optionally) required by any.
  pacman -Qqtd 
#+END_SRC


After you confirm, remove all of them:

#+BEGIN_SRC bash
  # -R: Remove packages.
  # -s: Remove unnecessary dependencies.
  # -u: Remove unneeded packages.
  # -n: Remove configuration file(s) too.
  # - : Read package list from standard input/pipe. In this case read
  #     output of query command (pacman -Qqd) and remove them using
  #     the pacman -Rns - command.
  pacman -Qtdq | doas pacman -Rns - 
#+END_SRC
